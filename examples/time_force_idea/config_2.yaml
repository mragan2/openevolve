# OpenEvolve: Phase 2 - "Stabilizacja i Logika"
# GOAL: Refine the code. Fix DivisionByZero. Optimize logic.
# ---------------------------------------------------------
max_iterations: 200          # Long run to refine details
checkpoint_interval: 20
log_level: "INFO"
random_seed: 42

# STABILITY (Prevents memory leaks)
max_tasks_per_child: 1

# ---------------------------------------------------------
# LLM SETTINGS (Strict & Logic)
# ---------------------------------------------------------
llm:
  primary_model: "qwen2.5-coder:7b"
  primary_model_weight: 0.9   # Rely mostly on the smarter coder for syntax
  secondary_model: "rnj-1:8b" 
  secondary_model_weight: 0.1 # Use Rnj occasionally for specialized math checks
  
  api_base: "http://localhost:11434/v1"
  api_key: "aa249496fa974637a67ebe8f05be1e21.bfs5CdlZ_ocSK0O__Guty9w0"
  
  temperature: 0.6            # LOW: Encourages correct, standard, bug-free code
  top_p: 0.90
  max_tokens: 16384
  timeout: 600

# ---------------------------------------------------------
# PROMPT SETTINGS
# ---------------------------------------------------------
prompt:
  system_message: |
    Jesteś Architektem Fizyki Obliczeniowej w Fazie 2 (Refaktoryzacja).
    
    TWOJE ZADANIE:
    Udoskonal klasę `RelativisticForce` oraz `EventHorizonForce`. 
    Skup się na stabilności numerycznej.
    
    1. Upewnij się, że dzielenie przez zero na horyzoncie zdarzeń jest obsłużone (try/except).
    2. Sprawdź limity prędkości 'c' w funkcjach - czy `math.sqrt()` nie dostaje ujemnych liczb?
    3. Nie dodawaj nowych funkcji/klas. Tylko naprawiaj i optymalizuj istniejące.

  num_top_programs: 6
  use_template_stochasticity: false # Consistency is key here

  # Clean Code Enforcers
  suggest_simplification_after_chars: 8000
  include_changes_under_chars: 200

# ---------------------------------------------------------
# DATABASE & EVOLUTION (High Exploitation)
# ---------------------------------------------------------
database:
  population_size: 50
  archive_size: 20
  num_islands: 4
  migration_interval: 10
  migration_rate: 0.1

  # PHASE 2 RATIOS (Fix Existing Things):
  elite_selection_ratio: 0.15   # Protect top 15% to prevent regression
  exploitation_ratio: 0.80      # Spend 80% of time refining/fixing the best code
  exploration_ratio: 0.05       # Only 5% random noise (very little "new" stuff)
  
  diversity_metric: "edit_distance"

# ---------------------------------------------------------
# EVALUATOR
# ---------------------------------------------------------
evaluator:
  timeout: 120
  cascade_evaluation: false     # DISABLE CASCADE: Thoroughly test every candidate
  parallel_evaluations: 1
  use_llm_feedback: false