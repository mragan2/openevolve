# Configuration for Missing Term Reconstruction
max_iterations: 30
checkpoint_interval: 10
log_level: "INFO"
random_seed: 42

# LLM configuration
llm:
  models:
    - name: "qwen2.5:14b-instruct-q4_K_M"
      weight: 0.7
      reasoning_effort: high
    - name: "qwen2.5-coder:7b"
      weight: 0.2

  evaluator_models:
    - name: "phi4:14b-q4_K_M"
      weight: 0.1
      reasoning_effort: high
      
  api_base: "http://localhost:11434/v1"
  api_key: 'aa249496fa974637a67ebe8f05be1e21.bfs5CdlZ_ocSK0O__Guty9w0'
  temperature: 0.8       # Higher temp is good for finding coefficients
  top_p: 0.95
  max_tokens: 4096
  timeout: 60
  retries: 3
  retry_delay: 5    

# Prompt configuration
prompt:
  system_message:
    You are a numerical cosmologist specializing in reconstruction of expansion history H(a).
    
    Task:
      You are given a Python module that defines a correction term to the standard LCDM model.
      Your job is to optimize the coefficients in the `correction_term(a)` function inside the
      EVOLVE block to reconstruct a "hidden" cosmological signal.
    
    The Scaffold:
      - The system defines `prediction(a) = H_LCDM(a) * (1 + correction_term(a))`
      - Your goal is to make `prediction(a)` match the hidden truth data.
    
    Your Evolution Targets (The "Basis" Functions):
      The function `correction_term(a)` is a linear combination of basis functions:
        - BASIS_1 = a^2 / (1 + a^2)
        - BASIS_2 = a^3 / (1 + a^3)
        - BASIS_3 = log(1 + a)
        - BASIS_4 = a
        - BASIS_5 = a^2
      
      You must tweak the coefficients `c1`, `c2`, `c3`, `c4`, `c5` to minimize the fit error.
      
    Coding Constraints:
      - MODIFY ONLY the coefficients `c1`, `c2`, `c3`, `c4`, `c5` inside `correction_term`.
      - Do NOT change the basis function definitions.
      - Do NOT import new libraries.
      - Ensure coefficients remain small (order 0.001 to 0.1).
      - Do NOT use functions like `H_mg_phenomenological`; stick strictly to `correction_term`.

    Output requirement:
      - Return a complete Python module where:
          * There is exactly one EVOLVE block.
          * Everything outside the EVOLVE block is identical to the previous program.
          * Only the body of `correction_term` (specifically the coefficients) is modified.

  num_top_programs: 4
  num_diverse_programs: 1  

  use_template_stochasticity: false
  
  template_variations:
    improvement_suggestion:
      - "Here are required corrections:"

  include_artifacts: true
  max_artifact_bytes: 20480
  artifact_security_filter: true

  suggest_simplification_after_chars: 400
  include_changes_under_chars: 100
  concise_implementation_max_lines: 10
  comprehensive_implementation_min_lines: 60
  
# Database configuration
database:
  db_path: null
  in_memory: true
  log_prompts: true

  # Optimized for Curve Fitting
  population_size: 50      
  archive_size: 50
  num_islands: 2           
  migration_interval: 75
  migration_rate: 0.05     

  elite_selection_ratio: 0.20   
  exploration_ratio: 0.20       # Increased for better coefficient search
  exploitation_ratio: 0.60      

  feature_dimensions:
    - "complexity"
    - "diversity"

  feature_bins: 8
  diversity_reference_size: 10   

# Evaluator configuration
evaluator:
  timeout: 300
  max_retries: 3
  cascade_evaluation: true
  cascade_thresholds:
    - 0.6
    - 0.92
  parallel_evaluations: 4
  use_llm_feedback: true
  llm_feedback_weight: 0.1

# Evolution trace
evolution_trace:
  enabled: false