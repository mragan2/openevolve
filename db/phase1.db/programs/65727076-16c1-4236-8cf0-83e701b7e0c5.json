{"id": "65727076-16c1-4236-8cf0-83e701b7e0c5", "code": "from dataclasses import dataclass, field, astuple\nfrom typing import List\nimport math\n\n# Constants for better readability\nGRAVITY_CONSTANT = 5.0\nDT = 0.1\n\n@dataclass(frozen=True)\nclass PhysicsConfig:\n    gravity: float = GRAVITY_CONSTANT  # Gravity constant\n    damping_coefficient: float = 0.1  # Damping coefficient\n    magnetic_field: float = 0.0  # Magnetic field\n\n@dataclass(frozen=True)\nclass SystemState:\n    position: float = 10.0  # Initial position\n    velocity: float = 0.0   # Initial velocity\n    momentum: float = 0.0   # Initial momentum\n    time: float = 0.0       # Initial time\n\n@dataclass(frozen=True)\nclass Forces:\n    gravitational: float = 0.0\n    damping: float = 0.0\n    electromagnetic: float = 0.0\n    magnetic: float = 0.0\n\n@dataclass\nclass PhysicsSimulator:\n    config: PhysicsConfig\n\n    def calculate_forces(self, state: SystemState) -> Forces:\n        \"\"\"Calculate all forces acting on the system.\"\"\"\n        gravitational = -self.config.gravity / (state.position ** 2 + 1e-10)\n        damping = self.config.damping_coefficient * state.velocity\n        electromagnetic = state.momentum * self.config.magnetic_field\n        magnetic = state.velocity * self.config.magnetic_field\n        \n        return Forces(\n            gravitational=gravitational,\n            damping=damping,\n            electromagnetic=electromagnetic,\n            magnetic=magnetic\n        )\n\n    def update_state(self, current_state: SystemState) -> SystemState:\n        \"\"\"Update the system state based on physics rules.\"\"\"\n        forces = self.calculate_forces(current_state)\n        \n        # Sum all forces to get total force\n        total_force = sum(astuple(forces), key=lambda x: x[0])\n        \n        # Calculate acceleration\n        acceleration = total_force / (current_state.momentum * math.sqrt(1 - (current_state.velocity ** 2) / self.configgravity()))\n        \n        # Update velocity and position\n        new_velocity = current_state.velocity + acceleration * DT\n        new_position = current_state.position + new_velocity * DT\n        new_momentum = current_state.momentum + forces.electromagnetic * DT\n        new_time = current_state.time + DT\n        \n        return SystemState(\n            position=new_position,\n            velocity=new_velocity,\n            momentum=new_momentum,\n            time=new_time\n        )\n\ndef run_simulation(steps: int = 100, config: PhysicsConfig = PhysicsConfig()) -> List[SystemState]:\n    simulator = PhysicsSimulator(config)\n    history = [SystemState()]\n    \n    for _ in range(steps):\n        current_state = history[-1]\n        new_state = simulator.update_state(current_state)\n        history.append(new_state)\n        \n    return history\n\ndef demo():\n    results = run_simulation(20, config=PhysicsConfig(gravity=5.0))\n    final_state = results[-1]\n    return {\n        \"final_pos\": final_state.position,\n        \"final_time\": final_state.time,\n        \"is_stable\": abs(final_state.position) < 1000.0\n    }\n\nif __name__ == \"__main__\":\n    print(demo())", "language": "python", "parent_id": "52ba3186-1c20-455a-a0db-be5f6c45e178", "generation": 4, "timestamp": 1765513062.3012233, "iteration_found": 40, "metrics": {"combined_score": 0.25, "syntax": 1.0, "idea_alignment": 0.25}, "complexity": 0.0, "diversity": 0.0, "metadata": {"changes": "Full rewrite", "parent_metrics": {"combined_score": 0.375, "syntax": 1.0, "idea_alignment": 0.375}, "island": 1}, "prompts": null, "artifacts_json": null, "artifact_dir": null, "embedding": null}